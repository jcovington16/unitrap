"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getTable = void 0;
const utils_js_1 = require("../helpers/utils.js");
const errors_js_1 = require("./errors.js");
const index_js_1 = require("./client/index.js");
function assertResponse(obj) {
    return (obj.external_url != null &&
        obj.image != null &&
        obj.name != null &&
        obj.schema != null &&
        obj.schema.columns != null);
}
function transformResponse(obj) {
    if (assertResponse(obj)) {
        const { attributes: _, ...base } = (0, utils_js_1.camelize)(obj);
        return { ...base, attributes: obj.attributes?.map(utils_js_1.camelize) };
    }
    /* c8 ignore next 2 */
    throw new Error("malformed table repsonse");
}
async function getTable(config, params, opts = {}) {
    const getTableById = (0, index_js_1.getFetcher)(config)
        .path("/tables/{chainId}/{tableId}")
        .method("get")
        .create();
    const { data } = await getTableById(params, opts).catch(errors_js_1.hoistApiError);
    const transformed = transformResponse(data);
    return transformed;
}
exports.getTable = getTable;
//# sourceMappingURL=tables.js.map